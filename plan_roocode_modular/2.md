# Step 2: Input Processing and Experiment Folder Management

## Objective

Implement the input processing and experiment folder management components of the RooCode modular system. These components will:
- Parse and validate command-line arguments
- Create or verify the experiment folder
- Set up the basic structure for the rest of the system

## Input Processing Design

### Command-Line Interface

We'll design a command-line interface that accepts the following parameters:

```bash
./roocode-modular.sh \
  --question "User question text" \
  --expt "experiment_folder" \
  --files "source1:dest1,source2:dest2" \
  --prompt "Optional prompt text"
```

Where:
- `--question`: The user question to save to question.md (required)
- `--expt`: The experiment folder name (required)
- `--files`: A comma-separated list of source:destination file pairs (optional)
- `--prompt`: The prompt text to save to outline.md (optional)

### Input Validation

We'll implement validation for each input:
- `--question`: Must be non-empty
- `--expt`: Must be a valid folder name
- `--files`: Each source file must exist, and the format must be valid
- `--prompt`: No specific validation required

## Experiment Folder Management

### Folder Creation/Verification

We'll implement logic to:
1. Check if the experiment folder exists in `/home/ubuntu/LaunchRoo/evals/python/`
2. If it exists, verify it's a valid experiment folder
3. If it doesn't exist, create it with the necessary structure

### Basic Structure

A valid experiment folder should have:
- Python test files (typically `*_test.py`)
- Implementation files (typically `*.py`)
- A `docs` subfolder for documentation

## Implementation

We'll create a script called `roocode-modular.sh` with the following structure:

```bash
#!/bin/bash
# roocode-modular.sh - Enhanced RooCode CLI workflow

# Constants
EVALS_DIR="/home/ubuntu/LaunchRoo/evals"
PYTHON_DIR="${EVALS_DIR}/python"

# Function to display usage information
function display_usage {
  echo "Usage: ./roocode-modular.sh --question \"User question\" --expt \"experiment_folder\" [--files \"source1:dest1,source2:dest2\"] [--prompt \"Optional prompt\"]"
  echo ""
  echo "Options:"
  echo "  --question  The user question to save to question.md (required)"
  echo "  --expt      The experiment folder name (required)"
  echo "  --files     A comma-separated list of source:destination file pairs (optional)"
  echo "  --prompt    The prompt text to save to outline.md (optional)"
  echo ""
  exit 1
}

# Function to parse command-line arguments
function parse_arguments {
  # Implementation details here
}

# Function to validate inputs
function validate_inputs {
  # Implementation details here
}

# Function to create or verify experiment folder
function manage_experiment_folder {
  # Implementation details here
}

# Main function
function main {
  parse_arguments "$@"
  validate_inputs
  manage_experiment_folder
  
  # Placeholder for future components
  echo "Input processing and experiment folder management completed successfully."
}

# Execute main function with all command-line arguments
main "$@"
```

## Testing

We'll create a test script called `test-input-processing.sh` that:
1. Tests the input processing with various valid and invalid inputs
2. Tests the experiment folder management with existing and non-existing folders
3. Verifies that the script behaves correctly in all cases

## Next Steps

In the next step, we'll implement the file management component, which will:
- Save the user question to question.md
- Save the prompt to outline.md if provided
- Copy specified files to the experiment folder

We'll build on the input processing and experiment folder management components implemented in this step.